<html>
<head>
</head>
<body>
  <ul id="myUl"></ul>

  <form onsubmit="createTask(this); return false;">
    <label for="ftask">Add Task:</label><br>
    <input type="text" id="userInput" name="ftask"><br>
  </form>
<script>
  console.log("about to fetch a flower");
  // remember that it must be http, rather than https or else you get SSL error 

  fetch('http://localhost:3000/tasks')
  .then((response) => response.json())
  .then((data) => { 
    console.log(data)
    data.forEach(function(item) {
    var li = document.createElement("li");
    var text = document.createTextNode(item.Title);
    li.setAttribute('id', item.ID)
    li.setAttribute('onclick','deleteTask(this);');
    li.appendChild(text);
    document.getElementById("myUl").appendChild(li);
});
  });
  
  function deleteTask(param) {
    fetch('http://localhost:3000/delete/' + param.id, {
  method: 'DELETE',
  headers: {
    'Accept': 'application/json, text/plain, */*',
    'Content-Type': 'application/json'
  },
  body: null
}).then(response => {
    console.log(response);
}).catch(e => {
    console.log(e);
});

    document.getElementById(param.id).remove();
}

function createTask(param) {
  var input = document.getElementById("userInput").value;

  fetch('http://localhost:3000/create', {
  method: 'POST',
  headers: {
    'Accept': 'application/json, text/plain, */*',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({title: input, str: 'Some string: &=&'})
}).then(response => {
    console.log(response);
}).catch(e => {
    console.log(e);
});

}

</script>
</body>
</html>